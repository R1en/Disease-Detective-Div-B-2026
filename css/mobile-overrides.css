/* Mobile Overrides for Epidemic Engine - Mobile Polish */

@media (max-width: 768px) {

    /* --- General Layout --- */
    .app-container {
        flex-direction: column;
        height: auto;
        min-height: 100vh;
    }

    .main-content {
        padding: 1rem;
        /* Increase bottom padding to account for safe areas */
        padding-bottom: 4rem;
    }

    .sidebar {
        /* Keep sidebar fixed/hidden logic from existing CSS, but ensure padding */
        padding-top: 4rem;
    }

    /* --- Interactive Triad (Chapter 3) --- */
    /* The triad widget has a flex container that needs to stack */
    .triad-widget>div {
        flex-direction: column !important;
        align-items: stretch !important;
    }

    .triad-svg-container {
        flex: 1 1 auto !important;
        width: 100%;
        display: flex;
        justify-content: center;
        margin-bottom: 2rem;
    }

    #triad-info {
        width: 100% !important;
        min-width: 0 !important;
        /* Allow shrinking */
    }

    /* --- Stop the Outbreak Simulator (Chapter 16) --- */
    .control-sim>div {
        flex-direction: column !important;
        align-items: stretch !important;
    }

    /* Stack the Flex Group with Controls + Graph */
    .control-sim>div:nth-child(2) {
        gap: 2rem;
    }

    /* Ensure Sliders use full width */
    .control-sim input[type="range"] {
        width: 100%;
        height: 24px;
        /* Easier touch target */
    }

    /* --- 2x2 Calculator --- */
    /* Reset table layout first */
    .table-2x2 table {
        display: block;
        width: 100%;
        overflow-x: auto;
        /* Allow side scroll if absolutely needed */
    }

    /* Make input cells smaller or stacking? 
       Actually, for 2x2, a table is the best semantic structure even on mobile.
       We just need to ensure inputs aren't huge.
    */
    .cell-input {
        width: 60px !important;
        /* Force smaller width */
        font-size: 1rem;
        /* Prevent zoom on iOS */
        padding: 0.5rem 0.25rem !important;
    }

    /* Break the "Calc Actions" buttons into a grid or stack */
    .calc-actions {
        display: grid !important;
        grid-template-columns: 1fr 1fr;
        /* 2 buttons per row */
        gap: 0.5rem;
    }

    .calc-actions button {
        width: 100%;
        margin: 0 !important;
        font-size: 0.8rem;
        padding: 0.75rem 0.5rem;
    }

    /* Mode selector stack */
    .mode-selector>div {
        flex-direction: column;
        align-items: flex-start;
    }

    .national-toggle {
        margin-top: 1rem !important;
        width: 100%;
        justify-content: space-between;
        background: rgba(0, 0, 0, 0.05);
        /* Subtle highlight */
        padding: 0.5rem;
        border-radius: 8px;
    }

    /* --- Navigation Buttons --- */
    /* Make "Next Chapter" huge and tap-friendly at bottom */
    button[onclick*="nav-item"] {
        width: 100%;
        padding: 1.5rem;
        font-size: 1.1rem;
        justify-content: center;
    }

    /* --- Typography Adjustment --- */
    h1 {
        font-size: 1.75rem;
    }

    h2 {
        font-size: 1.5rem;
    }

    p,
    li {
        font-size: 1rem;
        line-height: 1.5;
    }

    /* --- Accessibility Touch Targets (min 44px) --- */
    button,
    select,
    input[type="checkbox"]+span,
    nav button {
        min-height: 44px;
        min-width: 44px;
    }

    /* Fix Hamburger Menu tap area */
    #mobile-menu-toggle {
        padding: 1rem;
        min-height: 48px;
        min-width: 48px;
        display: flex;
        /* Ensure centering */
        align-items: center;
        justify-content: center;
    }

    /* --- 2x2 Calculator Mobile Polish --- */
    /* Allow results to sit side-by-side on small screens */
    .results-grid {
        grid-template-columns: repeat(auto-fit, minmax(145px, 1fr)) !important;
        gap: 0.5rem !important;
    }

    .results-grid .neo-card.small {
        padding: 0.75rem !important;
        font-size: 0.9rem;
    }

    .stat-value {
        font-size: 1.25rem !important;
    }
}